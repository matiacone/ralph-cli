{
  "tasks": [
    {
      "title": "Add logging helper functions to lib.ts",
      "description": "The CLI needs utility functions to determine log file paths and write timestamped entries. Feature runs should log to their feature directory, backlog runs to the root .ralph directory.",
      "acceptance": [
        "getLogFilePath() returns correct path for feature mode",
        "getLogFilePath() returns correct path for backlog mode",
        "appendToLog() writes timestamped entries with ISO format",
        "appendToLog() appends to existing file content"
      ],
      "passes": false
    },
    {
      "title": "Integrate logging into feature streaming",
      "description": "Both single-iteration and autonomous loop modes in the feature() function stream Claude output. Each chunk should be logged to the feature's ralph.log file.",
      "acceptance": [
        "Single iteration (--once) logs all streamed chunks",
        "Autonomous loop logs all streamed chunks",
        "Log file created at .ralph/features/<name>/ralph.log"
      ],
      "passes": false
    },
    {
      "title": "Integrate logging into backlog streaming",
      "description": "Both single-iteration and autonomous loop modes in the backlog() function stream Claude output. Each chunk should be logged to the root ralph.log file.",
      "acceptance": [
        "Single iteration (--once) logs all streamed chunks",
        "Autonomous loop logs all streamed chunks",
        "Log file created at .ralph/ralph.log"
      ],
      "passes": false
    },
    {
      "title": "Add session markers to logs",
      "description": "Logs need visual separators between iterations so users can navigate to specific runs. Each iteration should start with a clear marker.",
      "acceptance": [
        "Session start marker written at beginning of each iteration",
        "Marker includes iteration number",
        "Marker is visually distinct (separator line)"
      ],
      "passes": false
    },
    {
      "title": "Verify logging works end-to-end",
      "description": "Run the CLI and confirm logs are created correctly with proper content, timestamps, and append behavior.",
      "acceptance": [
        "bun test passes",
        "Manual test of feature --once creates log",
        "Manual test of backlog --once creates log",
        "Multiple runs append (don't overwrite)"
      ],
      "passes": false
    }
  ]
}
